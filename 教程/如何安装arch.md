# å¦‚ä½•å®‰è£archlinux
å†™è¿™ç¯‡æ–‡ç« çš„ä¸»è¦ç›®çš„æ˜¯æ•™æ–°äººå¦‚ä½•~~å…¥æ•™~~å®‰è£archlinuxåˆ°è‡ªå·±çš„ç”µè„‘ä¸Š,å› ä¸ºarchwikiçš„æ•™ç¨‹å€‹äººæ„Ÿè§‰å®åœ¨æ˜¯éš¾æ‡‚ğŸ˜¶ğŸ˜¶  
å…³äºå¦‚ä½•åˆ»ç›˜ä¹‹ç±»çš„ç›´æ¥è·³è¿‡,å¦‚æœè¿™éƒ½éœ€è¦æ•™ç¨‹çš„è¯å®åœ¨ä¸å»ºè®®ä½¿ç”¨arch(é€ƒ  
### è”ç½‘
archçš„å®‰è£…éœ€è¦è”ç½‘,å› ä¸ºå¾ˆå¤šåŒ…livecdå¹¶æ²¡æœ‰å¸¦
å¦‚æœä½ æ˜¯ç›´æ¥ç”¨ç½‘çº¿è¿æ¥åˆ°ç”µè„‘çš„è¯ç›´æ¥è¾“å…¥`ping -c 3 www.bing.com`æ¥ç¡®è®¤ä½ æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®ç½‘ç»œ  
```
root@archiso ~ # ping -c 3 www.bing.com
PING dual-a-0001.a-msedge.net (204.79.197.200) 56(84) bytes of data.
64 bytes from a-0001.a-msedge.net (204.79.197.200): icmp_seq=1 ttl=64 time=0.879 ms
64 bytes from a-0001.a-msedge.net (204.79.197.200): icmp_seq=2 ttl=64 time=0.709 ms
64 bytes from a-0001.a-msedge.net (204.79.197.200): icmp_seq=3 ttl=64 time=0.757 ms

--- dual-a-0001.a-msedge.net ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 0.709/0.781/0.879/0.078 ms
```
å¦‚æœä½ æ˜¯ç”¨çš„æ— çº¿ç½‘å¡çš„è¯ğŸ˜¶æŠ±æ­‰,æˆ‘æ²¡æœ‰æ— çº¿ç½‘å¡æ‰€ä»¥æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆåšğŸ˜¶  
### åŒæ­¥æ—¶é—´
å¾ˆå¤šæ“ä½œéƒ½éœ€è¦ä¿è¯æ—¶é—´çš„ç²¾ç¡®æ€§,ä¸ºäº†é˜²æ­¢å‡ºç°é—®é¢˜,è¿™é‡ŒåŒæ­¥ä¸‹æ—¶é—´  
```
root@archiso ~ # timedatectl set-ntp true
```
### åˆ†åŒº
ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯åˆ†åŒºå•¦
é¦–å…ˆè¾“å…¥`fdisk -l`ä¾†æŸ¥çœ‹ä½ ç”µè„‘çš„ç£ç›˜åˆ†åŒº
å¦‚æœä½ åªæœ‰ä¸€å—ç¡¬ç›˜é‚£ä¹ˆè¾“å…¥`fdisk /dev/sda`å°±å¥½äº†,å¦‚æœæœ‰å¤šå—ç£ç›˜è¯·è‡ªè¡Œç¡®è®¤ä½ è¦å®‰è£…åˆ°å“ªå—ç£ç›˜  
æ­¤å¤„æŠ›å¼ƒè½åçš„bioså¼•å¯¼è€Œä½¿ç”¨EFIå¼•å¯¼  
ä¸ªäººæ¨èçš„åˆ†åŒºæ˜¯åˆ†é…500mç»™/boot,å‰©ä¸‹çš„å…¨éƒ¨åˆ†é…ç»™/ä¹Ÿå°±æ˜¯æ ¹åˆ†åŒº,æˆ‘çš„ç‰©ç†å†…å­˜æœ‰16g,æ‰€ä»¥å°±ä¸ç”¨swapäº†ğŸ˜¶ğŸ˜¶  
ä¸‹é¢å¼€å§‹æ“ä½œ,**å‡è®¾ä½ ä½¿ç”¨å…¨æ–°çš„ç£ç›˜è¿›è¡Œå®‰è£…!!!**  
```
root@archiso ~ #fdisk /dev/sda 

```
> è¾“å…¥`g`æ¥åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„gptåˆ†åŒºè¡¨,**æ³¨æ„,æ­¤æ“ä½œä¼šè®©ä½ ä¸¢å¤±ç£ç›˜ä¸Šçš„å…¨éƒ¨æ•°æ®!!å¦‚æœä¸æ˜¯å…¨ç›˜å®‰è£…,ä¸è¦ä½¿ç”¨è¿™ä¸ª**  
è¾“å…¥`n`æ¥åˆ›å»ºä¸€ä¸ªæ–°åˆ†åŒº  
`Partition number`å’Œ`First sector`ä¿æŒé»˜è®¤å›è½¦å³å¯  
`Last sector`è¾“å…¥æˆ‘ä»¬æ‰€éœ€çš„å¤§å°,æ¯”å¦‚`+500M`,ç›´æ¥å›è½¦è¡¨ç¤ºä½¿ç”¨å‰©ä¸‹çš„å…¨éƒ¨  
è¾“å…¥`w`æ¥å†™å…¥ä½ çš„å˜æ›´  

åˆ†é…å®Œæˆåæˆ‘ä»¬éœ€è¦æ ¼å¼åŒ–åˆ†åŒº  
æ³¨æ„,ä¸è¦æ ¼é”™ç›˜äº†,æ•°æ®é‡è¦ğŸ˜¶ğŸ˜¶æˆ‘ä¹‹å‰å®‰è£…gentooå°±å› ä¸ºæ ¼é”™ç›˜æŠŠwindowsæ•´ä¸ªç»™æ‰¬äº†ğŸ˜¶ğŸ˜¶  
EFIåˆ†åŒºæ ¼å¼åŒ–æˆvfat,æ ¹åˆ†åŒºä¸€èˆ¬æ ¼å¼åŒ–æˆext4å°±å¥½äº†,å¦‚æœæ˜¯ssdå¯ä»¥å°è¯•ä¸‹f2fs,æ®è¯´å¯¹ssdæœ‰ç‰¹æ®ŠåŠ æˆ?ğŸ˜¶ğŸ˜¶
```
root@archiso ~ #mkfs.vfat /dev/sda1
root@archiso ~ #mkfs.ext4 /dev/sda2
```
### æŒ‚è½½åˆ†åŒº  
```
root@archiso ~ #mount /dev/sda2 /mnt 
root@archiso ~ #mkdir /mnt/boot
root@archiso ~ #mount /dev/sda1 /mnt/boot
```
### è°ƒæ•´æºçš„é¡ºåº
```
root@archiso ~ #nano /etc/pacman.d/mirrorlist
```
é€šè¿‡ctrl + kæ¥åˆ é™¤è¡Œä»¥ä¾¿äºè®©Chinaæºæ’åœ¨é¦–ä½,ä¸ªäººæ¨ètunaæº  
ç„¶ååŒæ­¥ä¸‹æ•°æ®åº“
```
root@archiso ~ #pacman -Syy
```
### å¼€å§‹å®‰è£…  
```
root@archiso ~ #pacstrap /mnt base base-devel linux linux-firmware nano
```
> æ­¤å¤„çš„linuxä¹Ÿå¯ä»¥æ¢æˆlinux-ltsæˆ–è€…linux-zen  
linuxå°±æ˜¯å¸¸è§„çš„linuxå†…æ ¸  
linux-ltsæ˜¯é•¿æœŸæ”¯æŒç‰ˆæœ¬  
linux-zenæ˜¯å†…ç½®äº†ä¸€å®šé‡çš„ä¼˜åŒ–çš„ç‰ˆæœ¬  

ä¸ªäººæ¨èæ–°æ‰‹çš„è¯è¿˜æ˜¯å®‰è£…å¸¸è§„çš„linuxå†…æ ¸,å› ä¸ºä¸€äº›é©±åŠ¨æ˜¯æœ‰é’ˆå¯¹ä¸åŒçš„å†…æ ¸æ‰“åŒ…çš„,æœ‰å„è‡ªå¯¹åº”çš„ç‰ˆæœ¬,è€Œç½‘ä¸Šçš„æ•™ç¨‹ä¸€èˆ¬åªé’ˆå¯¹linux,è¿™æ˜¯ä¸ºäº†é¿å…ä¸å¿…è¦çš„éº»çƒ¦ğŸ˜¶ğŸ˜¶å½“ç„¶åœ¨åæœŸä½ ç†Ÿæ‚‰ä¹‹åä½ ä¹Ÿå¯ä»¥å°è¯•æ›´æ¢å†…æ ¸,è¿™ä¸æ˜¯ä»€ä¹ˆéº»çƒ¦äº‹  
### ç”Ÿæˆfstab
```
root@archiso ~ #genfstab -U /mnt >> /mnt/etc/fstab
```
è¿™ä¸ªfstabèƒ½åœ¨å¼€æœºçš„æ—¶å€™å¸®æˆ‘ä»¬è‡ªåŠ¨æŒ‚è½½å„ç§æ–‡ä»¶ç³»ç»Ÿ,æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªä¸œè¥¿ğŸ˜¶ğŸ˜¶  
### chrootè¿›å…¥archè¿›è¡Œè¯¦ç»†é…ç½®
```
root@archiso ~ #arch-chroot /mnt
```
è®¾ç½®æ—¶åŒº
```
ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
```
è®¾ç½®ç¡¬ä»¶æ—¶é—´
```
hwclock --systohc --utc
```
å®‰è£…æ›´å‹å¥½çš„æ–‡æœ¬ç¼–è¾‘å·¥å…·
```
pacman -S nano
```
è®¾ç½®è¯­è¨€,åˆ æ‰`en_US.UTF-8`å’Œ`zh_CN.UTF-8`çš„æ³¨é‡Š
```
nano /etc/locale.gen
```
ç”Ÿæˆlocaleä¿¡æ¯
```
locale-gen
```
å†™å…¥locale.conf
```
echo LANG=en_US.UTF-8 >> /etc/locale.conf
```
è®¾ç½®ä¸€ä¸ªä¸»åŠ›å(æ­¤å¤„ä»¥mo9ä¸ºä¾‹
```
echo mo9 > /etc/hostname
```
è®¾ç½®rootå¯†ç ,æ³¨æ„,ä½ æ˜¯çœ‹ä¸åˆ°å¯†ç çš„,è¾“å…¥å°±å¯¹äº†ğŸ˜¶
```
passwd
```
### å®‰è£…bootloader
bootloaderæ˜¯ç”¨æ¥å¼•å¯¼ä½ çš„æ“ä½œç³»ç»Ÿå¯åŠ¨çš„ä¸œè¥¿ğŸ˜¶
é¦–å…ˆå®‰è£…åŸºæœ¬çš„åŒ…
```
pacman -S efibootmgr dosfstools grub os-prober
```
å®‰è£…å¼•å¯¼
```
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub --recheck
```
å¦‚æœæ²¡æœ‰é—®é¢˜çš„è¯ä½ èƒ½çœ‹åˆ°è¿™æ ·çš„æç¤º  
```
Installing for x86_64-efi platform.
Installation finished. No error reported.
```
ç„¶åç”Ÿæˆé…ç½®æ–‡ä»¶
```
grub-mkconfig -o /boot/grub/grub.cfg
```
### å®‰è£…æ¡Œé¢ç¯å¢ƒ
è¿™æ—¶å€™ä½ çš„archå·²ç»æ˜¯èƒ½å¤Ÿå¼€æœºçš„äº†,ä½†æ˜¯ä½ åªèƒ½å¾—åˆ°ä¸€ä¸ªé»‘ä¹ä¹çš„çª—å£ğŸ˜¶ğŸ˜¶å› ä¸ºä½ è¿˜æ²¡æœ‰å®‰è£…æ¡Œé¢ç¯å¢ƒ  
æ­¤å¤„ä»¥kdeä¸ºä¾‹  
é¦–å…ˆå®‰è£…xorg,ä¸­é€”è¯¢é—®å®‰è£…ä»€ä¹ˆåŒ…çš„è¯ç›´æ¥å›è½¦å°±å¥½äº†,ä¹Ÿå°±æ˜¯å…¨é€‰  
```
pacman -S xorg
```
ç„¶åå®‰è£…kde,è¿™é‡Œçš„kde-applicationsæ˜¯kdeå…¨å®¶æ¡¶,å»ºè®®è£…ä¸Šä»¥è·å¾—æ›´å¥½çš„ä½“éªŒ(
```
pacman -S plasma sddm kde-applications
```
å¯ç”¨ä¸€äº›å¿…è¦çš„æœåŠ¡
```
systemctl enable sddm
systemctl enable NetworkManager
```
å¦‚æœä½ æ˜¯nå¡ç”¨æˆ·å¯èƒ½è¿˜éœ€è¦å®‰è£…æ˜¾å¡é©±åŠ¨,ä¸ç„¶å¯èƒ½ä¸å¼€æœºæˆ–è€…èŠ±å±(å‘å‡ºfxxk nvidiaçš„å£°éŸ³  
```
pacman -S nvidia
```
å®‰è£…ä¸­æ–‡å­—ä½“  
```
pacman -S noto-fonts noto-fonts-cjk noto-fonts-emoji
```
### é…ç½®è¶…çº§ç”¨æˆ·
linuxä¸‹rootç”¨æˆ·èƒ½å¤Ÿä¸ºæ‰€æ¬²ä¸º,å½“ç„¶å¾ˆå¤šæ“ä½œæ¯”å¦‚å®‰è£…è½¯ä»¶åŒ…ç­‰ä¹Ÿéœ€è¦rootæƒé™
```
EDITOR=nano visudo
```
ç„¶åæ‰¾åˆ°`# %wheel ALL=(ALL) ALL`å»æ‰æ­¤å¤„çš„#  
ç„¶åæ–°å»ºä¸€ä¸ªç”¨æˆ·,æ¯”å¦‚æ–°å»ºä¸€ä¸ªç”¨æˆ·åä¸ºwyyxhxgçš„ç”¨æˆ·,å°±æ˜¯è¾“å…¥`useradd -m -G wheel wyyxhxg`,ç„¶åè®¾ç½®ç”¨æˆ·å¯†ç `passwd wyyxhxg`  

----
åˆ°è¿™é‡Œé…ç½®å°±åŸºæœ¬ç»“æŸå•¦
é€€å‡ºchrootç¯å¢ƒ
```
exit
```
å¸è½½åˆ†åŒº
```
umount -R /mnt
```
é‡å¯
```
reboot now
```
å¼€å§‹äº«å—ä½ çš„archlinuxå§
